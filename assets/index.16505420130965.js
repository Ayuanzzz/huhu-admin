var A=Object.defineProperty;var E=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var w=(e,a,l)=>a in e?A(e,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[a]=l,f=(e,a)=>{for(var l in a||(a={}))B.call(a,l)&&w(e,l,a[l]);if(E)for(var l of E(a))L.call(a,l)&&w(e,l,a[l]);return e};import{I as N,g as R,a as x}from"./items.1650542013096.js";import{f as H}from"./items.16505420130962.js";import T from"./addItem.1650542013096.js";import V from"./editItem.1650542013096.js";import{_ as j}from"./index.1650542013096.js";import{m as O,l as z,o as U,t as q,q as M,D as t,F as n,r as i,I as G,x as J,B as c,C as K}from"./vendor.1650542013096.js";const P={name:"doing",components:{AddItem:T,EditItem:V},setup(){const e=O(new N),a=()=>{e.pageNum=0,e.pageSize=10},l=z(),p=()=>{l.value.openDialog()},y=o=>{e.doingDatas.unshift(o)},C=(o,s)=>{e.doingDatas.splice(s,1)},g=z();let _=0;const h=(o,s)=>{_=s,e.changeData=f({},o),g.value.openDialog()},m=(o,s=_)=>{e.doingDatas.splice(s,1,o)},D=o=>{e.pageSize=o},r=o=>{e.pageNum=o};return U(()=>{a(),R({}).then(o=>{const s=o.doingData;for(let u in s)e.doingDatas[u]=f({},s[u]),e.doingDatas[u].employeeStr=H(s[u].employeeData),e.total=s.length}),x({}).then(o=>{e.employeeList=o.employeeList})}),f({addItemRef:l,editItemRef:g,initData:a,updateData:m,openAddItem:p,addDoingData:y,delData:C,onOpenEditItem:h,onHandleSizeChange:D,onHandleCurrentChange:r},q(e))}},Q={class:"system-menu-container"},W={class:"system-menu-search mb15"},X=c(" \u67E5\u8BE2 "),Y=c(" \u65B0\u589E\u9879\u76EE "),Z=c("\u4FEE\u6539"),$=c("\u5220\u9664");function ee(e,a,l,p,y,C){const g=i("el-input"),_=i("elementSearch"),h=i("el-icon"),m=i("el-button"),D=i("elementFolderAdd"),r=i("el-table-column"),o=i("el-table"),s=i("el-popover"),u=i("el-progress"),b=i("el-pagination"),I=i("el-card"),v=i("AddItem"),F=i("EditItem");return G(),M("div",Q,[t(I,{shadow:"hover"},{default:n(()=>[J("div",W,[t(g,{size:"small",placeholder:"\u8BF7\u8F93\u5165\u9879\u76EE\u540D\u79F0",style:{"max-width":"180px"}}),t(m,{size:"small",type:"primary",class:"ml10"},{default:n(()=>[t(h,null,{default:n(()=>[t(_)]),_:1}),X]),_:1}),t(m,{size:"small",type:"success",class:"ml10",onClick:p.openAddItem},{default:n(()=>[t(h,null,{default:n(()=>[t(D)]),_:1}),Y]),_:1},8,["onClick"])]),t(o,{data:e.doingDatas,style:{width:"100%"},"row-key":"path",border:"","tree-props":{children:"children",hasChildren:"hasChildren"}},{default:n(()=>[t(r,{prop:"itemName",label:"\u9879\u76EE","show-overflow-tooltip":""}),t(r,{label:"\u4EBA\u5458",width:"120",height:"70"},{default:n(d=>[t(s,{placement:"right",width:260,height:500,trigger:"click"},{reference:n(()=>[t(m,{color:"#626aef",plain:"",size:"small"},{default:n(()=>[c(K(d.row.employeeStr),1)]),_:2},1024)]),default:n(()=>[t(o,{data:d.row.employeeData},{default:n(()=>[t(r,{width:"150",property:"joinTime",label:"\u52A0\u5165\u65F6\u95F4"}),t(r,{width:"100",property:"name",label:"\u59D3\u540D"})]),_:2},1032,["data"])]),_:2},1024)]),_:1}),t(r,{label:"\u8FDB\u5EA6",width:"220"},{default:n(d=>[t(u,{"text-inside":!0,"stroke-width":20,percentage:d.row.percentage},null,8,["percentage"])]),_:1}),t(r,{prop:"deadline",label:"\u622A\u6B62\u65E5\u671F",width:"180"}),t(r,{prop:"startTime",label:"\u8D77\u59CB\u65E5\u671F",width:"180"}),t(r,{label:"\u64CD\u4F5C","show-overflow-tooltip":"",width:"140"},{default:n(({row:d,$index:S})=>[t(m,{size:"mini",type:"text",onClick:k=>p.onOpenEditItem(d)},{default:n(()=>[Z]),_:2},1032,["onClick"]),t(m,{size:"mini",type:"text",onClick:k=>p.delData(d,S)},{default:n(()=>[$]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),t(b,{onSizeChange:p.onHandleSizeChange,onCurrentChange:p.onHandleCurrentChange,class:"mt15","pager-count":5,"page-sizes":[10,20,30],"current-page":e.pageNum,"onUpdate:current-page":a[0]||(a[0]=d=>e.pageNum=d),background:"","page-size":e.pageSize,"onUpdate:page-size":a[1]||(a[1]=d=>e.pageSize=d),layout:"total, sizes, prev, pager, next, jumper",total:e.total},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])]),_:1}),t(v,{ref:"addItemRef",addDoingData:p.addDoingData,employeeList:e.employeeList},null,8,["addDoingData","employeeList"]),t(F,{ref:"editItemRef",changeData:e.changeData,employeeList:e.employeeList,updateData:p.updateData},null,8,["changeData","employeeList","updateData"])])}var de=j(P,[["render",ee]]);export{de as default};
